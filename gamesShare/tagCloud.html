<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,viewport-fit=cover, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
    <title></title>
    <link rel="stylesheet" type="text/css" href="css/jqcloud.css" />
    <script src="js/jquery-2.1.0.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jqcloud-1.0.4.js" type="text/javascript" charset="utf-8"></script>
    <script src="../public/service.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        .append_div {
            background: black;
            color: #FFFFFF;
            opacity: 0.5;
            text-align: center;
            position: absolute;
            height: 100px;
            width: 80px;
        }

        .fontlab {
            background:rgba(245,250,245,1);
            font-family: PingFangSC-Medium,PingFang SC;
            font-weight: 500;
            color: rgba(93,221,111,1);
            line-height: 16px;
        }
        .fontwidth1{
            width: 50px;
        }
        .fontwidth2{
            width: 40px;
        }
        .fontsize1 {
            font-size: 16px;
        }

        .fontsize2 {
            font-size: 14px;
        }

        .fontsize3 {
            font-size: 13px;
        }

        .fontsize4 {
            font-size: 11px;
        }

        .fontsize5 {
            font-size: 9px;
        }

        .fontsize6 {
            font-size: 8px;
        }
    </style>
</head>
<body>
    <div id="canshu"></div>
    <div id="my_favorite_latin_words" style="padding: 10px;height:193px;"></div>
    
    <script type="text/javascript">
        var data = [];
        var tag_list = []
        $(function () {
            var urllabel = decodeURIComponent(Request('list'))
            // urllabel.splice(3,5)
            console.log('list', urllabel)
            if (urllabel) {
                urllabel = JSON.parse(urllabel)
                var height='214'
               if (urllabel.length >= 16) {
                    console.log('16')
                    height = '320px'
                } else if (urllabel.length >= 14) {
                    console.log('14')
                    height = '244px'
                } else if (urllabel.length > 12) {
                    console.log('12')
                    height = '224px'
                }
               
               
              
                var div=document.querySelector("#my_favorite_latin_words");
                div.style.height=height;
                labellist(urllabel)
            }
        });
        //标签云
        function labellist(tag_list) {
            var string_ = "";
            var tag_listlength = tag_list.length
            for (var i = 0; i < tag_listlength; i++) {
                var tag_listitem = tag_list[i].length >= 5 ? tag_list[i].substring(0, 5) + '...' : tag_list[i]
                data[i] = [tag_listitem, tag_listlength - i]
                var string_f = data[i][0];
                var string_n = data[i][1];
                // 字体大小重置
                var fontsize = ''
                if (i < 3 && i >= 0) {
                    if (tag_list[i].length < 4) {
                        fontsize = 'fontsize1'
                    } else {
                        fontsize = 'fontsize2'
                    }

                    if(tag_list[i].length >= 5){
                        fontsize+=' fontwidth1'
                    } else  if(tag_list[i].length == 4){
                        fontsize+=' fontwidth2'
                    }

                } else if (i < 10 && i >= 3) {
                    if (tag_list[i].length < 4) {
                        fontsize = 'fontsize3'
                    } else {
                        fontsize = 'fontsize4'
                    }
                    
                } else if (i < 20 && i >= 10) {
                    if (tag_list[i].length < 4) {
                        fontsize = 'fontsize5'
                    } else {
                        fontsize = 'fontsize6'
                    }
                } 

                string_ += "{text: '" + string_f + "', weight: '" + string_n + "',html: {'class': 'span_list fontlab " + fontsize + "',}},";
            }
            var string_list = string_;
            var word_list = eval("[" + string_list + "]");
            console.log('string_:',$("#my_favorite_latin_words").height())
            $("#my_favorite_latin_words").jQCloud(word_list,{center: {x: document.body.clientWidth/2, y: $("#my_favorite_latin_words").height()/2 - 60}});
        }
    </script>
 
</body>
</html>