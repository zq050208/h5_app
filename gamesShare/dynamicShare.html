<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width,viewport-fit=cover, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
    <title>用户主页</title>
    <link rel="stylesheet" href="../public/mescroll.min.css">
    <link rel="stylesheet" href="css/gameDetails.css">
    <style>
        .mescroll {
            position: fixed;
            width: 100vw;
            top: 24px;
            bottom: 0;
            height: auto;
            /*如设置bottom:50px,则需height:auto才能生效*/
            background: #FBF8FB;
        }

        .gameiconlistimg {
            margin-left: 10px;
            width: 60px;
            height: 59px;
            background: rgba(216, 216, 216, 1);
            border-radius: 10px;
            object-fit: cover;
        }

        .dynamictitlefont {
            font-size: 16px;
            font-family: PingFangSC-Medium, PingFang SC;
            font-weight: 500;
            color: rgba(26, 26, 26, 1);
            line-height: 16px;
        }

        .dynamicattfont {
            font-size: 14px;
            font-family: PingFangSC-Regular, PingFang SC;
            font-weight: 400;
            color: rgba(50, 50, 50, 1);
            line-height: 12px;
        }

        .detailsTopback {
            position: relative;
            width: 100%;
            height: 294px;
        }

        .contentnews {
            margin: 10px 15px 15px 15px;
            font-size: 14px;
            font-family: PingFangSC-Regular, PingFang SC;
            font-weight: 400;
            color: rgba(51, 51, 51, 1);
            line-height: 20px;
        }

        .dynamicShareatten {
            width: 85px;
            height: 30px;
            background: rgba(255, 204, 3, 1);
            border-radius: 15px;
        }

        .dynamicShuserIcon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
        }

        .username {
            padding: 0 15px;
            font-size: 15px;
            font-family: PingFangSC-Medium, PingFang SC;
            font-weight: 500;
            color: rgba(255, 255, 255, 1);
            line-height: 15px;
        }

        .userInfofont {
            font-size: 13px;
            font-family: PingFangSC-Regular, PingFang SC;
            font-weight: 400;
            color: rgba(255, 255, 255, 1);
            line-height: 12px;
        }

        .commentdivbox {
            width: 100%;
            position: absolute;
            bottom: -44px;
            z-index: 99;
        }

        .commentdiv {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0px 2px 6px 0px rgba(179, 179, 179, 0.16);
            border-radius: 10px;
            height: 89px;
            margin: 0 15px;
        }

        .number {
            font-size: 20px;
            font-family: DINAlternate-Bold, DINAlternate;
            font-weight: bold;
            color: rgba(52, 52, 52, 1);
            line-height: 20px;
        }

        .fontnumber {
            margin-top: 15px;
            font-size: 14px;
            font-family: PingFangSC-Medium, PingFang SC;
            font-weight: 500;
            color: rgba(179, 179, 179, 1);
            line-height: 14px;
        }

        .dynamicdivbox {
            position: relative;
            height: 121px;
            background: #FBF8FB;
        }

        .dynamicdivboxtop {
            position: absolute;
            bottom: 20px;
        }

        .selectnav {
            font-size: 18px;
            font-family: PingFangSC-Medium, PingFang SC;
            font-weight: 500;
            color: rgba(51, 51, 51, 1);
            line-height: 25px;
            margin-right: 25px;
        }

        .noselectnav {
            font-size: 14px;
            font-family: Helvetica;
            color: rgba(179, 179, 179, 1);
            line-height: 17px;
            margin-right: 25px;
        }

        .newscontent {
            height: 65px;
            background: #F7F4F8;
            border-radius: 5px;
            border-radius: 5px;
            margin: 0 15px;
           
        }

        .newgameicon>img {
            margin-left: 10px;
            width: 50px;
            height: 48px;
            background: rgba(216, 216, 216, 1);
            border-radius: 10px;
            object-fit: cover;
        }

        .newgameback>img {
            margin-right: 13px;
            width: 10px;
            height: 16px;
        }

        .nickname {
            font-size: 15px;
            font-family: PingFangSC-Semibold, PingFang SC;
            font-weight: 600;
            color: rgba(51, 51, 51, 1);
            line-height: 15px;
        }

        /* .fewer {
            -webkit-line-clamp: 4;
        } */

        .publishfont {
            font-size: 16px;
            font-family: PingFangSC-Regular, PingFang SC;
            font-weight: 400;
            color: rgba(51, 51, 51, 1);
            line-height: 16px;
        }

        .dynamicatttimefont {
            font-size: 12px;
            font-family: PingFangSC-Regular, PingFang SC;
            font-weight: 400;
            color: rgba(153, 153, 153, 1);
            line-height: 12px;
        }

        .fontsize14 {
            font-size: 14px;
            font-family: PingFangSC-Regular, PingFang SC;
            font-weight: 400;
            line-height: 14px;
        }
        .newgamename{
            font-size:14px;
            font-family:PingFangSC-Medium,PingFang SC;
            font-weight:500;
            color:rgba(51,51,51,1);
            line-height:20px;
        }
        .newgameone_introduce{
            margin-top: 5px;
            font-size:13px;
            font-family:PingFangSC-Regular,PingFang SC;
            font-weight:400;
            color:rgba(102,102,102,1);
            line-height:18px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            
        }
        .changeImage{
            width: 20px;
            height: 22px;
            position: absolute;
            right: 0;
            bottom: 0;
        }
        .hiddenImage{
            display: none;
        }
        .imgList{
            display: flex;
            justify-content:start;
            padding-left: 15px;
            padding-right: 15px;
            flex-wrap: wrap;
        }
        .itemFooter{
            display: flex;
            justify-content: space-between;
            padding-left: 15px;
            padding-right: 15px;
            margin-top: 10px;
        }
        .ok{
            color:#19BE6B;
            font-size:12px;
            display: inline-block;
            height: 20px;
            width: 52px;
            border-radius: 3px;
            border: 1px solid #19BE6B;
            text-align: center;
            line-height: 20px;
        }
        .isOk{
            color:#8B8B8B;
            font-size:12px;
            display: inline-block;
            height: 20px;
            width: 52px;
            border-radius: 3px;
            border: 1px solid #8B8B8B;
            text-align: center;
            line-height: 20px;
        }
        .retext2{

        }
        .text_hidden{
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 4;
            overflow: hidden;
        }
        .header_text_name{
            color:rgba(255, 255, 255, 1);
            font-size: 15px;
            font-family: PingFangSC-Medium, PingFang SC;
            font-weight: 500;
            width: 89px;
        }
        .masterProfile{
            width: 15px;
            height: 16px;
        }
        
    </style>
</head>

<body>
    <div id="mescroll" class="mescroll">
        <!--顶部展示栏*小虎Hoo图标+名称+slogan+打开app按钮-->
        <div class="sharetop" style="padding:8px 15px 8px 15px;">
            <!-- 左 * 小虎Hoo图标+名称+slogan、-->
            <div class="startcenter">
                <!--小虎Hoo图标-->
                <div class="iconhoo">
                    <img src="https://cdn.tinytiger.cn/b55e2898efbe44673559b1a287a9960.png" />
                </div>
                <!--名称+slogan-->
                <div>
                    <!--名称-->
                    <p class="appname">小虎Hoo</p>
                    <!--slogan-->
                    <p class="slogan">玩“好”游戏</p>
                </div>
            </div>
            <!-- 右 * 打开app-->
            <div>
                <div class="openapp appname centercenterrow" onclick='clickgoapp()'>打开APP</div>
            </div>
        </div>

        <!--详情页顶部-->
        <div class="detailsTopbackdiv">
        </div>

        <!--动态*游戏-->
        <div class="dynamicdivbox">
            <div class="dynamicdivboxtop centerbetween" style="padding:0 15px">
                <div class="startstart">
                    <div class="centercentercolumn" onclick="newestClick()" style="height:34px;">
                        <div class="selectnav nav newestnav">动态</div>
                        <div class="selectbox newestbox" style="margin-top: 4px;"></div>
                    </div>
                    <div class="centercentercolumn" onclick="hotClick()" style="height:34px;">
                        <div class="noselectnav nav hotnav">游戏</div>
                        <div class="noselectbox hotbox" style="margin-top: 4px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 动态数据列表&游戏数据列表 -->
        <div class="news">
        </div>
        <div class="newsGame">
        </div>
    <div class="msgdialog"></div>
    <div class="shareModal">
        <img src="../new_information/image/icon-guidance.png" alt="">
    </div>
    <!-- 详情页顶部 -->
    <script type="text/html" id="detailsTopbackdiv">
        {{each item v i}}
        <div 
            class="detailsTopback endbetweencolumn" 
            style="background-image:url({{v.userinfo.background_img?v.userinfo.background_img:'./img/bg.png'}});background-repeat:no-repeat;background-size:100% 100%;background-color:black">
            <div class="centerbetween" style="width:100%;">
                <div class="startcenter centerbetween" style='width:74%;justify-content:start'>
                    <!--头像-->
                    <div class="startstart" style="margin-right:10px;margin-left:15px;position:relative" >
                        <img class="dynamicShuserIcon" src="{{v.userinfo.avatar}}" />
                        {{if v.userinfo.master_type===1}}
                        <img class="changeImage" src='./img/yellow.png' />
                        {{/if}}
                        {{if v.userinfo.master_type===2}}
                        <img class="changeImage" src='./img/pink.png' />
                        {{/if}}
                    </div>
                    <div style='height:60px;max-width:50%'>
                        <span class=' header_text_name' style=''>{{ v.userinfo.nickname}}</span>
                    </div>
                    {{if v.userinfo.medal_image}}
                    <div style='height:60px;'>
                        <img alt='' src = {{v.userinfo.medal_image}} style='width:36px;height:18px;margin-left:5px;' />
                    </div>
                    {{/if}}
                    <!--昵称及星数-->
                    <div class="startcentercolumn">
                    </div>
                </div>
                
                <!--右-->
                <!-- 关注 -->
                <div style='margin-top:15px'>
                    <div class="dynamicShareatten centercentercolumn dynamicattfont" style="margin-right:15px;" onclick='clickgoapp()'> 关注</div>
                    <div class="dynamicShareatten centercentercolumn dynamicattfont" style="margin-right:15px;margin-top:25px" onclick='clickgoapp()'> 私信</div>
                </div>
            </div>
            <!-- 名称 -->
            <!-- <div class="username" style='display: flex; align-items: center; justify-content: center;'>
                {{v.userinfo.medal_name}}
                <img alt='' src = {{v.userinfo.medal_image}} />
            </div> -->
            <!-- <div class="username" style="margin-top:10px;margin-bottom:14px;"> {{v.userinfo.nickname}}</div> -->
            <div class="username" style="margin-bottom:10px;">
                <!-- 性别 -->
                <span class="userInfofont">{{v.userinfo.gender==1?'男':'女'}}</span>
                {{if  !(v.userinfo.constellation)&&!(v.userinfo.provcn)&&!(v.userinfo.citycn)}}
                <span class="userInfofont">/</span><span class="userInfofont"> 你的心里</span>
                {{/if}}
                <!-- 星座 -->
                {{if v.userinfo.constellation}}
                <span class="userInfofont">/</span><span class="userInfofont">{{v.userinfo.constellation}}</span>
                {{/if}}
                <!-- 省 -->
                {{if v.userinfo.provcn}}
                <span class="userInfofont">/</span><span class="userInfofont">{{v.userinfo.provcn}}</span>
                {{/if}}
                <!-- 城市 -->
                <span class="userInfofont">{{v.userinfo.citycn}}</span>
            </div>
            <!-- 个人简介 -->
            <div class="username" style="margin-bottom:10px;">
                {{v.userinfo.resume}}
                <!-- <span>

                </span> -->
            </div>
            
            <div class="username" style="margin-bottom:66px;display:flex;align-items:center">
                {{if v.userinfo.master_profile}}
                    {{if v.userinfo.master_type===1}}
                    <img class="masterProfile" src={{v.userinfo.master_type===1?'./img/yellow.png':null}} />
                    {{/if}}
                    {{if v.userinfo.master_type===2}}
                    <img class="masterProfile" src={{v.userinfo.master_type===2?'./img/pink.png':null}} />
                    {{/if}}
                    <div class="username" style="margin-left: -10px;">
                        {{v.userinfo.master_profile}}
                        <!-- <span> </span> -->
                    </div>
                {{/if}}
            </div>
            <!-- 关注 & 粉丝 & 获赞 框 -->
            <div class="commentdivbox">
                <div class="commentdiv centerbetween">
                    <div style="width:33%" class="centercentercolumn">
                        {{if v.follow_num.toString().length>=5}}
                        <div class="number">{{(v.follow_num/10000).toFixed(1)}}w</div>
                        {{/if}}
                        {{if v.follow_num.toString().length< 5}}
                        <div class="number">{{v.follow_num||0}}</div>
                        {{/if}}
                        <div class="fontnumber">关注</div>
                    </div>
                    <div style="width:33%" class="centercentercolumn">
                        {{if v.fans_num.toString().length>=5}}
                        <div class="number">{{(v.fans_num/10000).toFixed(1)}}w</div>
                        {{/if}}
                        {{if v.fans_num.toString().length< 5}}
                        <div class="number">{{v.fans_num||0}}</div>
                        {{/if}}
                        <div class="fontnumber">粉丝</div>
                    </div>
                    <div style="width:33%" class="centercentercolumn">
                        {{if v.like_num.toString().length>=5}}
                        <div class="number">{{(v.like_num/10000).toFixed(1)}}w</div>
                        {{/if}}
                        {{if v.like_num.toString().length< 5}}
                        <div class="number">{{v.like_num||0}}</div>
                        {{/if}}
                        <div class="fontnumber">获赞</div>
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
    </script>
    <!-- 动态数据列表&游戏数据列表 -->
    <script type="text/html" id="news">
        {{each item v i}}
        <div style="margin-bottom:10px;">
            <!-- "type": 2, #类型:1=评价 2=帖子 -->
            {{if v.type===1}}
            <div style="background:#fff;padding-bottom: 15px;">
                <div class="centerbetween" style="padding:15px;">
                    <div class="startcenter">
                        <div class='publishfont' style='margin-right:10px'>发布了一条评价</div>
                        <!-- 星级 -->
                        <div class="startcenter">
                            <% for(var i = 0;i < v.score;i++){ %>
                            <img class="staritem" src=" https://cdn.tinytiger.cn/icon-starselect.png" style='margin-right:4px;' />
                            <% } %>
                            <% for(var i = 0;i < 5-v.score;i++){ %>
                            <img class="staritem" src="https://cdn.tinytiger.cn/icon-starnoselect.png" style='margin-right:4px;' />
                            <% } %>
                        </div>
                    </div>
                    <!-- 时间 -->
                    <div class='dynamicatttimefont'>
                        {{v.create_time}}
                    </div>
                </div>
                <div class="newscontent centerbetween" style='margin-bottom:15px;'>
                    <div class="newgameicon centercenterrow">
                        <img src="{{v.logo}}" />
                        <div class='fontsize14' style='margin-left:10px;color:rgba(51,51,51,1);'>{{v.game_name}}</div>
                        <div class='fontsize14' style='margin-left:10px;color:rgba(51,51,51,1);'>{{v.one_introduce}}</div>
                    </div>
                    <div class="newgameback" onclick='clickgoapp()'><img src="https://cdn.tinytiger.cn/icon-arrrightnews.png" /></div>
                </div>
                <div class='dynamictitlefont' style='padding:0 15px'>{{v.title}}</div>
                <div class="contentnews fewer">{{v.content}}</div>
            </div>
            {{/if}}
            <!-- 帖子的时候 -->
            {{if v.type===2}}
            <div style="background:#fff;padding-bottom: 15px;">
                <div class="centerbetween" style="padding:15px;">
                    <div class="startcenter">
                        <div class='publishfont' style='margin-right:10px'>{{v.answer_id===-1?'发布了一条动态帖':'发布了一条问答贴'}}</div>
                        <!-- 星级 -->
                    </div>
                    <!-- 时间 -->
                    <div class='dynamicatttimefont'>
                        {{v.create_time}}
                    </div>
                </div>
                <div style='padding-left:15px;padding-right:15px;'>
                    
                   
                        <!-- <span class='text_hidden' style='color:#333333;font-size:15px; -webkit-line-clamp: 3;'> -->
                        <span  style='color:#333333;font-size:15px;'>

                            {{if v.answer_id>=0}}
                            <span class={{v.answer_id!==0?'ok':'isOk'}}>
                                {{v.answer_id!==0?'已解答':'待解答'}}

                            </span>
                            {{/if}}
                            {{each v.circle_list v i}}
                            <span style='color:#FF556E;font-size:15px' >
                                #{{v.name}}#
                            </span>
                            {{/each}}
                            {{if v.content}}
                                {{v.content}}
                            {{/if}}
                        </span>
                        <span 
                            style='color:#D7AB00;font-size:15px;' 
                            onclick="clickgoapp()">
                            {{v.content.length>50?"全文":null}}
                        </span>
                </div>
                <div class='imgList'>
                    {{if v.img_url.length>=2}}
                        {{each v.img_url v i}}
                            <!-- <div style='width:33%;margin-top:10px;border-radius:15px;overflow:hidden;position:relative;margin-left:5px'>
                                <img src={{v}} alt="" style='position:absolute;left:0;right:0;top:0;bottom:0;margin: auto;max-width:100%' />
                            </div> -->
                            <img src={{v}} alt="" style='width: 30%;height:26vw;margin-top:10px;border-radius:15px;overflow:hidden;margin-left:3%' />
                        {{/each}}
                    {{/if}}
                    {{if v.img_url.length===1}}
                     <!-- <div style='width:100%;height:194px;margin-top:10px;border-radius:15px;overflow:hidden;position:relative;'>
                        <img src={{v.img_url[0]}} alt="" style='position:absolute;left:0;right:0;top:0;bottom:0;margin: auto;' />
                    </div> -->
                        <div style='width:100%;margin-top:10px;border-radius:15px;'>
                            <img src={{v.img_url[0]}} alt=""  style='width:100%;height:75vw;margin-top:10px;border-radius:15px; object-fit: cover;' />
                        </div>
                    {{/if}}
                </div>
                <div class='itemFooter'>
                   
                   {{if v.answer_id===-1}}
                   <div style='display:flex;align-items: center;width:50%;'>
                        {{if (v.circle_name)||v.modular_name}}
                            <img src='./img/position.png' alt='' style='width:12px;height:15px'>
                            {{if v.modular_name !== '综合'}}
                            {{if v.modular_name}}
                            <span class='text_hidden' style='color:#D7AB00;-webkit-line-clamp: 1;'>{{v.circle_name}}-{{v.modular_name}}</span>
                            {{/if}}
                            {{if !(v.modular_name) }}
                            <span class='text_hidden' style='color:#D7AB00;-webkit-line-clamp: 1;'>{{v.circle_name}}</span>
                                {{/if}}
                            {{/if}}
                            {{if v.modular_name === '综合'}}
                            <span class='text_hidden' style='color:#D7AB00;-webkit-line-clamp: 1;'>{{v.circle_name}}</span>
                            {{/if}}
                        {{/if}}
                    </div>
                   <div class="startend" >
                        <div class="centerend" onclick="clickgoapp()">
                            <img class="icondianzan"   src="https://cdn.tinytiger.cn/icon-dianzan1.png" />
                            {{if v.like_num.toString().length>=5}}
                            <div style='color:#828282;font-size:12px'>{{(v.like_num/10000).toFixed(1)}}w</div>
                            {{/if}}
                            {{if v.like_num.toString().length< 5}}
                            <div style='color:#828282;font-size:12px'>{{v.like_num||0}}</div>
                            {{/if}}
                        </div>
                        <div class="centerend" style="margin-right:12px;margin-left:20px;" onclick="clickgoapp()">
                            <img class="icondianzan" src="https://cdn.tinytiger.cn/icon-pinglun1.png" />
                            {{if v.comment_num.toString().length>=5}}
                            <div style='color:#828282;font-size:12px'>{{(v.comment_num/10000).toFixed(1)}}w</div>
                            {{/if}}
                            {{if v.comment_num.toString().length< 5}}
                            <div style='color:#828282;font-size:12px'>{{v.comment_num||0}}</div>
                            {{/if}}
                        </div>
                        <div class="centerend" onclick="clickgoapp()">
                            <img style='height:18px;width:18px;margin-bottom: 1px;' src="./img/share.png" />
                        </div>
                    </div>
                   {{/if}}
                   {{if v.answer_id !==-1 }}
                   <div style='display:flex;align-items: center'>
                        {{if (v.circle_name)||v.modular_name}}
                        <img src='./img/position.png' alt='' style='width:12px;height:15px'>
                            {{if v.modular_name !== '综合'}}
                                {{if v.modular_name}}
                                <span class='text_hidden' style='color:#D7AB00;'>{{v.circle_name}}-{{v.modular_name}}</span>
                                {{/if}}
                                {{if !(v.modular_name) }}
                                <span class='text_hidden' style='color:#D7AB00;'>{{v.circle_name}}</span>
                                {{/if}}
                            {{/if}}
                            {{if v.modular_name === '综合'}}
                            <span class='text_hidden' style='color:#D7AB00;'>{{v.circle_name}}</span>
                            {{/if}}
                        {{/if}}
                    </div>
                   <div>
                        {{if v.answer_id > 0 }}
                        <span style='font-size:14px;color:#808080'>{{v.participate_num}}人参与回答</span>
                        {{/if}}
                        {{if v.answer_id===0 }}
                        <span class='ok' onclick="clickgoapp()">
                            邀请回答
                        </span>
                        {{/if}}
                   </div>
                  {{/if}}
                </div>
            </div>
            {{/if}}
        </div>
        {{/each}}
    </script>
    <script type="text/html" id='newsGame'>
        {{each item v i}}
        <div class="newscontent centerbetween" style='margin-bottom:15px;  height:80px; background:rgba(255,255,255,1); box-shadow:0px 2px 6px 0px rgba(179,179,179,0.16); border-radius:10px;'>
            <div class="gameiconlist startcenter">
                <div class='gameiconlistimg' >
                    <img class='gameiconlistimg' style='margin-left: 0px;' src={{v.logo}} />
                </div>
                <div class='startcentercolumn'>
                    <div class='newgamename' style='padding:0 15px;'>{{v.name}}</div>
                    <div class='newgameone_introduce' style='padding:0 15px;'>{{v.one_introduce}}</div>
                </div>
            </div>
            <div class="newgameback startcenter " style='height:44px;border-left: 1px solid #E6E6E6;padding-left:10px;' onclick='clickgoapp()'>
                <img style='width:26px;height:26px' src="https://cdn.tinytiger.cn/icon-arrrightnewsbtn.png" />
            </div>
        </div>
        {{/each}}
    </script>
    <script src="../public/template-web.js"></script>
    <script src="../public/tool.js"></script>
    <script src="js/swiper.min.js"></script>
    <script src="../public/jquery.min.js"></script>
    <script src="../public/mescroll.min.js"></script>
    <script src="../public/module/msgDialog.js"></script>
    <script src="../public/config.js"></script>
    <script src="../public/service.js"></script>
    <script>
        var isShowText = false
        // 当前页
        var currentPage = 0
        // 总页数
        var last_page = 1
        //1 动态 2：游戏
        var isClicktype = 1
        var isGetData=false
        var mescroll = new MeScroll("mescroll", { //第一个参数"mescroll"对应上面布局结构div的id
            //如果您的下拉刷新是重置列表数据,那么down完全可以不用配置,具体用法参考第一个基础案例
            //解析: down.callback默认调用mescroll.resetUpScroll(),而resetUpScroll会将page.num=1,再触发up.callback
            down: {
                auto: false,
                callback: downCallback //下拉刷新的回调,别写成downCallback(),多了括号就自动执行方法了
            },
            up: {
                use: true,
                isBounce: false,
                callback: upCallback //上拉加载的回调
            }
        });
        window.onload = function () {
            $(".shareModal").click(function () {
                $(".shareModal").hide()
            })
            getGameWikiDetail()
        }

        // 个人主页获取点赞数,粉丝数,关注数
        function getGameWikiDetail() {
            var config = {
                gameInfoUrl: 'UserHomepage/index',
                type: 'get',
                token: Request('token'),
                data: {
                    user_id: Request('user_id'),
                }
            };
            RequsetHttp(config.gameInfoUrl, config.type, config.token, config.data, function (res) {
                if (res.code == 200) {
                    //详情页顶部
                    if( res.data.userinfo.nickname){
                        res.data.userinfo.nickname=res.data.userinfo.nickname.length>16?res.data.userinfo.nickname.substring(0,16)+'...':res.data.userinfo.nickname
                    }
                    if( res.data.userinfo.resume){
                        res.data.userinfo.resume=res.data.userinfo.resume.length>21?res.data.userinfo.resume.substring(0,21)+'...':res.data.userinfo.resume
                    }
                    if( res.data.userinfo.master_profile){
                        res.data.userinfo.master_profile=res.data.userinfo.master_profile.length>21?res.data.userinfo.master_profile.substring(0,21)+'...':res.data.userinfo.master_profile
                    }
                    console.log(res.data.userinfo.nickname)
                    console.log(res.data.userinfo.resume)
                    console.log(res.data.userinfo.master_profile)
                    var detailsTopbacklist = [res.data]
                    var detailsTopbackitem = template('detailsTopbackdiv', { item: detailsTopbacklist })
                    $(".detailsTopbackdiv").html(detailsTopbackitem)

                } else {
                }
            })
        }

        // 用户主页-动态
        function getDynamic(refresh) {
            $('.news').css('display','block')
            $('.newsGame').css('display','none')
            var config = {
                // gameInfoUrl: 'UserHomepage/getDynamic', //旧
                gameInfoUrl: 'UserHomepage/getUserDynamic', // 新
                type: 'get',
                token: Request('token'),
                data: {
                    user_id: Request('user_id'),
                    page: currentPage,
                    per_page:10
                }
            };
            RequsetHttp(config.gameInfoUrl, config.type, config.token, config.data, function (res) {
                if (res.code == 200) {
                    last_page = res.data.last_page
                    //详情页顶部
                    var newslist = res.data.data
                    console.log(newslist)
                    for (var i = 0; i < newslist.length; i++) {
                        newslist[i].create_time = timeagoNew((new Date(newslist[i].create_time.replace(/\-/g, "/"))).getTime());
                        var str = newslist[i].content
                        if (str) {
                            newslist[i].photos = getSimpleImgList(str)
                        }
                        // newslist[i].content = getSimpleText(newslist[i].content)
                        newslist[i].content =ponduce_point (newslist[i].content,50)
                    }

                    var newsitem = template('news', { item: newslist })
                    if (refresh) {
                        $(".news").append(newsitem)
                    } else {
                        $(".news").html(newsitem)
                    }
                    setTimeout(function(){
                        isGetData=false
                    },1000)
                } else {
                    setTimeout(function(){
                        isGetData=false
                    },1000)
                    mescroll.endErr();
                }
            })
        }

        function ponduce_point (value,number){
            var text = ''
            if(value.length>=number){
                text = value.substr(0,number)+'...'
            }else{
                text = value
            }
            return text
        }

        function getGame(refresh) {
            $('.news').css('display','none')
            $('.newsGame').css('display','block')
            var config = {
                gameInfoUrl: 'UserHomepage/getGame',
                type: 'get',
                token: Request('token'),
                data: {
                    user_id: Request('user_id'),
                    page: currentPage
                }
            };
            RequsetHttp(config.gameInfoUrl, config.type, config.token, config.data, function (res) {
                if (res.code == 200) {
                    //详情页顶部
                    // var newslist = res.data.data
                    // var gamelisthtml = ``
                    last_page = res.data.last_page
                    // for (var i = 0; i < newslist.length; i++) {
                    //     gamelisthtml += `  <div class="newscontent centerbetween" style='margin-bottom:15px;  height:80px; background:rgba(255,255,255,1); box-shadow:0px 2px 6px 0px rgba(179,179,179,0.16); border-radius:10px;'>
                    //                             <div class="gameiconlist startcenter"><img class='gameiconlistimg' src='${newslist[i].logo}' />
                    //                                 <div class='startcentercolumn'>
                    //                                     <div class='newgamename' style='padding:0 15px;'>${newslist[i].name}</div>
                    //                                     <div class='newgameone_introduce' style='padding:0 15px;'>${newslist[i].one_introduce}</div>
                    //                                 </div>
                    //                             </div>
                    //                             <div class="newgameback startcenter " style='height:44px;border-left: 1px solid #E6E6E6;padding-left:10px;' onclick='clickgoapp()'><img style='width:26px;height:26px' src="https://cdn.tinytiger.cn/icon-arrrightnewsbtn.png" /></div>
                    //                         </div>`
                    // }
                    var gameListItemData = res.data.data
                    var gamelistItemDataItem = template('newsGame', { item: gameListItemData })
                    if (refresh) {
                        $(".newsGame").append(gamelistItemDataItem)
                    } else {
                        $(".newsGame").html(gamelistItemDataItem)
                    }
                    setTimeout(function(){
                        isGetData=false
                    },1000)
                } else {
                    setTimeout(function(){
                        isGetData=false
                    },1000)
                    mescroll.endErr();
                }
            })
        }
        function clickgoapp() {
            goApp(3, Request('user_id'))
        }

        function newestClick(e) {
            replaceClass("hotbox", "selectbox", "noselectbox")
            replaceClass("newestbox", "noselectbox", "selectbox")
            replaceClass("hotnav", "selectnav", "noselectnav")
            replaceClass("newestnav", "noselectnav", "selectnav")

            currentPage = 1
            isClicktype = 1
            getDynamic(false)
        }
        function hotClick(e) {
            replaceClass("newestbox", "selectbox", "noselectbox")
            replaceClass("hotbox", "noselectbox", "selectbox")
            replaceClass("newestnav", "selectnav", "noselectnav")
            replaceClass("hotnav", "noselectnav", "selectnav")

            currentPage = 1
            isClicktype = 2
            getGame(false)
        }

        //下拉刷新的回调
        function downCallback() {
            currentPage = 1;
            getGameWikiDetail()
            if (isClicktype == 1) {
                getDynamic(false)
            } else {
                getGame(false)
            }
            mescroll.endErr();
        }

        //上拉加载的回调 page = {num:1, size:10}; num:当前页 默认从1开始, size:每页数据条数,默认10
        function upCallback(page) {
            // console.log('page',page)
            console.log('currentPage',currentPage)
            if(!isGetData){
                isGetData=true
                if (last_page >= currentPage) {
                    currentPage++
                    if (isClicktype == 1) {
                        getDynamic(true)
                    } else {
                        getGame(true)
                    }
                }
            }
            mescroll.endErr();
        }
    </script>
    <div style="display: none;">
        <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278943282'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1278943282' type='text/javascript'%3E%3C/script%3E"));</script>
    </div>
</body>

</html>